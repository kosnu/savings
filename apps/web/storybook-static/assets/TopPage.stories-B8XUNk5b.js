import{r as i,j as r}from"./iframe-dHABiMeZ.js";import{f}from"./test-dBchXaWu.js";import{d as l,c,s as h,g as m,o as p,G as x,a as y,b as P,e as j,u as w,F as v}from"./store-BDQXzfpO.js";import{P as b}from"./Paper-BUAhuMkA.js";import{p as u}from"./paths-BaoOW6pi.js";import{u as E,M as I}from"./chunk-JZWAC4HX-CBO1G18r.js";import{p as C}from"./container-IyyOPDwT.js";import{o as N}from"./button-Dvhl8X7z.js";import"./preload-helper-PPVm8Dsz.js";import"./get-subtree-B5itu7Ql.js";async function A({db:s,value:e}){const a=l(s,c.users.path(),e.id).withConverter(c.users.converter);await h(a,e)}async function F(s){const e=m();p(e,a=>{(async()=>{if(!a){const o=new x;await y(e,j);const t=await P(e,o);if(!t?.user)return;await A({db:s,value:{id:t.user.uid,email:t.user.email??"",name:t.user.displayName??"NO NAME"}})}})()})}function M(){const s=w(),e=E(),a=i.useCallback(async()=>{try{await F(s),await e(u.payments.getHref())}catch(o){console.error("Error signing in:",o)}},[s,e]);return i.useEffect(()=>{const o=m(),t=p(o,d=>{d&&e(u.payments.getHref())});return()=>t()},[e]),{signIn:a}}function g(){const{signIn:s}=M();return r.jsx(r.Fragment,{children:r.jsx(C,{size:"2",children:r.jsxs(b,{children:[r.jsx("h2",{children:"My Savings"}),r.jsx(N,{onClick:s,children:"ログイン"})]})})})}g.__docgenInfo={description:"",methods:[],displayName:"TopPage"};const L={title:"Pages/TopPage",component:g,parameters:{},tags:["autodocs"],decorators:[s=>r.jsx(I,{initialEntries:["/"],children:r.jsx(v,{config:f,children:r.jsx(s,{})})})],argTypes:{},args:{}},n={args:{}};n.parameters={...n.parameters,docs:{...n.parameters?.docs,source:{originalSource:`{
  args: {}
}`,...n.parameters?.docs?.source}}};const U=["Default"];export{n as Default,U as __namedExportsOrder,L as default};
