import{r as o,ag as f,j as t,p as y}from"./iframe-dHABiMeZ.js";import{C as h}from"./CancelButton-DZNQ4KDk.js";import{p as x}from"./formatDateToLocaleString-Bdtd92uY.js";import{t as g}from"./toCurrency-B1XOnn-n.js";import{d as j,c as P,gy as w,u as C}from"./store-BDQXzfpO.js";import{u as D}from"./useAuthCurrentUser-BTHXZyFx.js";import{s as b,n as v,p as k,g as T,m as q,D as d}from"./dialog-B3tDX_ew.js";import{o as l}from"./button-Dvhl8X7z.js";async function E(e,n,r){if(r===void 0)throw new Error("paymentId is undefined.");const s=j(e,P.payments.path(n),r);await w(s)}function S(){const{currentUser:e}=D(),n=C();return{deletePayment:o.useCallback(async s=>{if(!e)throw new Error("User is not authenticated.");await E(n,e.uid,s.id)},[n,e])}}function $({payment:e,open:n,onClose:r,onSuccess:s}){const{deletePayment:i}=S(),{openSnackbar:a}=f(),u=e?`${x(e.date)} ${e.note} ${g(e.amount)}`:"Payment not found.",m=o.useCallback(c=>{c||r?.()},[r]),p=o.useCallback(async()=>{if(e)try{await i(e),a("success","Payment deleted successfully."),s()}catch{a("error","Failed to delete payment.")}},[i,e,s,a]);return t.jsxs(b,{open:n,onOpenChange:m,children:[n===void 0&&t.jsx(v,{children:t.jsx(l,{children:"Delete payment"})}),t.jsxs(k,{children:[t.jsx(T,{children:"Delete this payment?"}),t.jsx(q,{children:u}),t.jsxs(y,{gap:"3",mt:"4",justify:"end",children:[t.jsx(d,{children:t.jsx(h,{})}),t.jsx(d,{children:t.jsx(l,{color:"red",disabled:!e,onClick:p,children:"Delete"})})]})]})]})}$.__docgenInfo={description:"",methods:[],displayName:"DeletePaymentModal",props:{payment:{required:!1,tsType:{name:"union",raw:"Payment | null",elements:[{name:"Payment"},{name:"null"}]},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSuccess:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{$ as D};
