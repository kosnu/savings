# Architecture Overview

## Introduction

このドキュメントでは、アプリケーションのアーキテクチャについて説明します。

TypeScript + Hono + Cloudflare Workers + D1で構成されています。

### ローカル環境

ローカル環境上でプロセスを起動し、MiniflareでエミュレートされたCloudflare
D1に接続して動作確認を行います。

```shell
task dev
```

### Production環境

Production環境では、Cloudflare Workers上でプロセスを起動し、Cloudflare
D1に接続して動作確認を行います。

## アーキテクチャ

クリーンアーキテクチャを採用しています。

### レイヤー構成

- **ドメイン層**: ビジネスルールとエンティティを定義します。
  - エンティティはアプリケーションの中心的なビジネスオブジェクトを表します。
  - VO(Value Object)は不変のオブジェクトで、属性の集合を表します。
- **アプリケーション層**: ユースケースを実装し、ビジネスルールを調整します。
- **インターフェース層**: 外部システムとのインターフェースを提供します。
- **インフラストラクチャ層**: データベースや外部APIとの通信を実装します。

### ディレクトリ構成

```
src/
├── entities/          # エンティティ層
├── usecases/         # ユースケース層
├── interfaces/       # インターフェース層
├── infrastructure/   # インフラストラクチャ層
└── app.ts            # アプリケーションのエントリーポイント
```

### 依存関係のルール

- 上位層は下位層に依存します。
- 下位層は上位層に依存しません。
- 依存関係はインターフェースを通じて注入されます。
- ビジネスルールは外部の詳細に依存しません。
- 外部の詳細はビジネスルールに依存します。
- 依存関係の方向は内側に向かいます。

### 技術スタック

- **TypeScript**:
  型安全なJavaScriptのスーパーセットで、コードの品質と保守性を向上させます。
- **Hono**: 高性能なWebフレームワークで、Cloudflare
  Workersに最適化されています。
- **Cloudflare Workers**:
  サーバーレス環境で、グローバルに分散されたエッジネットワーク上でコードを実行します。
- **D1**:
  Cloudflareの分散型SQLデータベースで、高速なデータアクセスを提供します。
- **Miniflare**: ローカル環境でCloudflare
  Workersをエミュレートするツールで、開発とテストを容易にします。
