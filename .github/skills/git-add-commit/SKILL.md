---
name: git-add-commit
description: 変更内容を安全にステージングし、必要な検証を経て意図した単位でコミットするための汎用スキル
---

# Git add / commit スキル

## 目的
- 変更内容を安全にステージングし、意図した単位でコミットする。
- 不要な差分混入や検証漏れを防ぐ。

## 適用範囲
- `git add` と `git commit` のみ。
- push / PR 作成 / リリース作業は対象外。

## 実行手順
1. 変更状況を確認する。
   - どのファイルが変更・追加・削除されたかを把握し、今回の作業範囲外の差分を見分ける。
2. 検証対象ディレクトリを特定する。
   - 変更が入った各ワークスペース・ディレクトリごとに、既存の lint / type check / test / build など必要な検証を実行する。
   - 固定コマンドを決め打ちせず、その領域に定義済みのチェック手順に従う。
3. ステージング対象を最小化する。
   - 原則としてファイル単位・パス単位で add する。
   - 全体追加は、意図した差分だけであると確認できた場合にのみ使う。
   - 変更は観点（例: 機能追加、バグ修正、リファクタリング）ごとに分け、コミット単位を分割する。
4. コミット前に staged 差分を確認する。
   - コミットに含まれる変更が、タスク目的と一致していることを確認する。
5. コミットメッセージ案を確認する。
   - 実際に使うコミットメッセージ（タイトル・本文・トレーラー）をコミット前に提示し、内容確認を行う。
6. コミットする。
   - 変更の意図が分かるメッセージでコミットし、必要なトレーラーやプロジェクト規約を満たす。
   - コミットメッセージ（タイトル・本文）は日本語で記述する。
7. コミット結果を確認する。
   - 直近コミットの対象ファイルとメッセージが想定どおりかを確認する。

## セーフティルール
- 自分の作業と無関係な差分はコミットに含めない。
- 破壊的な Git 操作（履歴破壊・強制上書き系）は使わない。
- 検証失敗時はコミットしない。
- 1コミット1目的を基本にし、レビュー可能な粒度を保つ。
- コミットメッセージ案の事前確認なしでコミットしない。
- 日本語でのコミットメッセージ記述を省略しない。

## 完了条件
- 必要な検証が変更領域ごとに通過している。
- staged 差分がタスク目的と一致している。
- コミット後の内容確認まで完了している。
